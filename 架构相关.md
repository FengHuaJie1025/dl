## 架构模式

### 1、分层 

初步可以将系统分为应用层、服务层、数据层，后续可以继续分层

### 2、分割

大体上可以分为门禁、工程、物业、客户接口四大模块，门禁、工程模块又分别包含app后台和管理网站

门禁app主要是住户使用，可以接收通知、一键开门、申请钥匙、授权住户、来访申请、物业报修

工程app主要是安装师傅使用，可以绑定设备到楼栋、配置楼栋信息、搜索设备

物业app主要是物业人员使用，可以一键开门、住户管理、员工管理、申请物业

客户接口是对一些服务的二次封装，用于开放给客户使用

每个模块可以有自己的dao、service实现，甚至可以有自己的数据库

### 3、分布式

将不同的模块部署在不同的服务器上，通过远程调用协同工作，需要使用MQ 和 dubbo/spring cloud

### 4、集群

将服务集群化，提高系统可用性

### 5、缓存

CDN、反向代理、本地缓存、分布式缓存

### 6、异步

单一服务器通过多线程共享消息队列实现异步，业务操作前面的线程将输出写入到队列，后面的线程从队列中读取数据并进行处理；分布式系统中，多个服务器集群可以通过分布式消息队列实现异步，分布式消息队列可以看做内存队列的分布式部署。
提高系统可用性、加快网站响应速度、流量消峰。但使用异步可能会对用户体验、业务流程产生影响。

### 7、冗余

定期备份、存档保存实现冷备份；主从分离、实时同步实现热备份

### 8、自动化

### 9、安全

对称加密、非对称加密



## 网站核心架构要素

### 性能

衡量标准：响应时间（发出请求到响应数据的时间）、并发数（系统能同时请求的数目）、吞吐量（单位时间系统处理的请求数量）、性能计数器（内存使用、CPU使用、磁盘与网络IO）

通过性能测试、负载测试、压力测试、稳定性测试等手段得到是否符合设计目标、业务要求、负载能力、最大承受压力，对请求的每个环节进行分析，排查瓶颈，定位问题。

前端性能优化：减少HTTP请求（合并js、css），使用浏览器缓存、开启压缩、CDN加速

服务器性能优化：缓存、异步、集群、多线程、资源复用、数据结构。

存储性能优化：固态、B+树/LSM树

### 可用性

衡量标准：假设系统中的一个或者多个服务器宕机或出现各种不预期问题时，系统整体是否依然可用

高可用的应用：通过负载均衡进行**无状态服务**的失效转移

高可用的服务：分级管理（核心应用和服务使用更好的硬件）、超时策略（抛出异常/服务降级）、异步调用、幂等性设计

高可用的数据：最终一致、数据备份、失效转移

高可用的软件保障：自动化测试、预发布验证、灰度发布

网站运行监控：监控数据收集（用户行为日志、服务端性能监控、运行数据日志）、监控管理（系统报警、失效转移、自动优雅降级）

### 伸缩性

衡量标准：是否可用多台服务器构建集群，是否易向集群中添加新的服务器，加入新的服务器是否可用提供和原来无差别的服务，集群中可容纳的服务器是否有限制。

集群、负载均衡

### 扩展性

衡量标准：新增业务产品时，是否可以对现有产品透明无影响，不需要改动或者很少改动就可以上线新产品，不同产品之间是否很少耦合。

设计网站的扩展性架构核心思想是模块化，并在此基础上降低模块间的耦合性，提高模块的复用性。模块之间通常使用消息队列or分布式服务进行松散耦合。

实现方式：基于事件驱动、发布订阅模式

### 安全性

针对现存的或者潜在的各种攻击窃取手段，是否有可靠的应对策略。

XSS跨站点脚本攻击、注入攻击、CSRF跨站请求伪造

加密技术：

- 单向散列加密（SHA、MD5，通常用于密码加密）、

- 对称加密（DES、RC，加密和解密使用同一个密钥，可以互推，常用于安全交换的场合，如Cookie）、

- 非对称加密（RSA，分为公钥私钥，常用于信息安全传输、数字签名）

信息过滤与反垃圾：文本匹配、贝叶斯算法、黑名单机制







